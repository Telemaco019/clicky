{% if not props.error %}
  <!-- Swap the existing query with the optimized one -->
  {% if props.content.optimized_query %}
    <textarea
      hx-swap-oob="true"
      id="query-text-area"
      name="query"
      :disabled="isLoading"
      class="h-64 w-full rounded-md border border-gray-300 p-2 disabled:text-gray-500"
      required
    >
{{ props.content.optimized_query }}</textarea
    >
  {% endif %}

  <!-- Explain optimizations -->
  <div
    id="query-optimizations"
    class="mt-6 rounded-lg border border-gray-200 bg-blue-50 p-4 shadow-sm"
  >
    <h3 class="mb-3 text-lg font-semibold text-blue-700">Improvements</h3>
    {% if props.content.improvements %}
      <ul class="list-inside list-disc space-y-2 text-gray-800">
        {% for optimization in props.content.improvements %}
          <li class="leading-relaxed">{{ optimization }}</li>
        {% endfor %}
      </ul>
    {% else %}
      No improvements were made to the query.
    {% endif %}
  </div>
{% else %}
  <div class="bg-red-100 p-4 font-mono text-red-500">Something went wrong</div>
{% endif %}
